<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ORA Policy Briefings</title>

  <!-- Fonte Sora -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Sora:wght@100..800&display=swap');
  </style>

  <!-- Acelera conexões com YouTube / thumbnails -->
  <link rel="preconnect" href="https://www.youtube-nocookie.com">
  <link rel="preconnect" href="https://i.ytimg.com">
  <link rel="preconnect" href="https://www.google.com">
  <link rel="dns-prefetch" href="https://www.youtube-nocookie.com">
  <link rel="dns-prefetch" href="https://i.ytimg.com">
  <link rel="dns-prefetch" href="https://www.google.com">

  <style>
    body {
      margin: 0;
      padding: 40px 0;
      background-color: #002a28;
      font-family: "Sora", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: white;
    }

    h1 {
      margin-bottom: 40px;
      font-size: 2em;
      font-weight: 600;
      letter-spacing: 0.5px;
      text-align: center;
    }

    .galeria {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      /* 5 vídeos por linha */
      gap: 20px;
      justify-items: center;
      max-width: 1400px;
      /* espaço amplo para 5 colunas */
    }

    .thumb {
      width: 220px;
      height: 125px;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      object-fit: cover;
    }

    .thumb:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.4);
    }

    /* ======= MODAL ======= */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      justify-content: center;
      align-items: center;
      z-index: 10;
      padding: 24px;
    }

    .modal iframe {
      width: min(1200px, 80vw);
      height: min(675px, 60vh);
      border: none;
      border-radius: 10px;
      background: #000;
    }

    .modal.active {
      display: flex;
    }

    .close-btn {
      position: absolute;
      top: 24px;
      right: 32px;
      font-size: 40px;
      color: white;
      cursor: pointer;
      user-select: none;
      line-height: 1;
    }

    /* ======= RESPONSIVIDADE ======= */
    @media (max-width: 1200px) {
      .galeria {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    @media (max-width: 900px) {
      .galeria {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 700px) {
      .galeria {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 500px) {
      .galeria {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>

  <h1>Click in the images to listen more about Amazonian Trajectories</h1>

  <!-- ======= GALERIA ======= -->
  <div class="galeria">
    <!-- URLs limpas (sem ?si=...) e com ?rel=0 -->
    <img src="imgs/thumb1.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/_BRdGshL2oo?rel=0">
    <img src="imgs/thumb2.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/dtGHTN5gO_Q?rel=0">
    <img src="imgs/thumb12.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/WRkI6E6VyqA?rel=0">
    <img src="imgs/thumb3.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/-pJ4GEDEO4k?rel=0">
    <img src="imgs/thumb4.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/QO9xH2QnbDw?rel=0">

    <img src="imgs/thumb13.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/HQK0hOGhWnE?rel=0">
    <img src="imgs/thumb5.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/IawSiJVrenI?rel=0">
    <img src="imgs/thumb6.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/OlveV20sli0?rel=0">
    <img src="imgs/thumb7.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/PeopEBE3_Z4?rel=0">
    <img src="imgs/thumb8.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/I4NQchY_DC0?rel=0">

    <img src="imgs/thumb9.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/iDrfWQAnOhQ?rel=0">
    <img src="imgs/thumb10.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/GFIJ0qQPgR4?rel=0">
    <img src="imgs/thumb11.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/jBNTunlhAdA?rel=0">
    <img src="imgs/thumb14.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/F9xs9cl9Xfo?rel=0">
    <img src="imgs/thumb15.gif" class="thumb" data-video="https://www.youtube-nocookie.com/embed/JZhKOOPTX9E?rel=0">
  </div>

  <!-- ======= MODAL DE VÍDEO ======= -->
  <div class="modal" id="videoModal">
    <span class="close-btn" id="closeBtn" aria-label="Fechar">&times;</span>
    <!-- iframe é inserido dinamicamente -->
    <iframe id="videoFrame" title="YouTube video player" allow="autoplay; encrypted-media; picture-in-picture"
      allowfullscreen referrerpolicy="strict-origin-when-cross-origin">
    </iframe>
  </div>

  <script>
    const thumbs = document.querySelectorAll('.thumb');
    const modal = document.getElementById('videoModal');
    const iframe = document.getElementById('videoFrame');
    const closeBtn = document.getElementById('closeBtn');

    // Monta URL final rapidamente (sem parâmetros desnecessários)
    function buildUrl(base) {
      // Se já tem '?', usamos '&', senão '?'
      const join = base.includes('?') ? '&' : '?';
      // rel=0 (mesmo canal), modestbranding, autoplay, playsinline
      return `${base}${join}modestbranding=1&autoplay=1&playsinline=1`;
    }

    // Aquece a conexão com o YouTube no primeiro hover (ganho de ~100-300ms)
    let warmed = false;
    function warmConnections() {
      if (warmed) return;
      warmed = true;
      ['https://www.youtube-nocookie.com', 'https://i.ytimg.com', 'https://www.google.com']
        .forEach(href => {
          const l = document.createElement('link');
          l.rel = 'preconnect';
          l.href = href;
          document.head.appendChild(l);
        });
    }

    // Abre vídeo ao clicar
    thumbs.forEach(img => {
      img.addEventListener('pointerenter', warmConnections, { once: true }); // pré-aquece no primeiro hover

      img.addEventListener('click', () => {
        const baseUrl = img.getAttribute('data-video'); // já está com ?rel=0
        iframe.src = buildUrl(baseUrl);
        modal.classList.add('active');
      }, { passive: true });
    });

    // Fecha e limpa (para parar o áudio imediatamente)
    function closeModal() {
      iframe.src = '';
      modal.classList.remove('active');
    }

    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', e => { if (e.target === modal) closeModal(); });
    document.addEventListener('keydown', e => { if (e.key === 'Escape' && modal.classList.contains('active')) closeModal(); });
  </script>

</body>

</html>